(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-773813ee"],{"3c48":function(t,e,a){},"5fa3":function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"e",(function(){return n})),a.d(e,"d",(function(){return c})),a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return l}));var o=a("b775");function s(){return Object(o["a"])({url:"/img_test",method:"get"})}function n(){return Object(o["a"])({url:"/",method:"get"})}function c(t){return Object(o["a"])({url:"/post_style",method:"post",data:t})}function i(t){return Object(o["a"])({url:"/img_plus",method:"post",data:t})}function l(t,e){return Object(o["a"])({url:"/img_waifu/"+e,method:"post",data:t})}},"64fd":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"upload-form"},[a("div",{staticClass:"upload-item"},[a("el-upload",{ref:"upload01",staticClass:"avatar-uploader",attrs:{"http-request":t.uploadFile,action:t.base_api+"/post_content","show-file-list":!1,"auto-upload":!0,multiple:!1,"before-upload":t.beforeContentUpload,"on-change":t.handleContentAccept}},[t.post_content?a("img",{staticClass:"avatar",attrs:{src:t.post_content}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{staticClass:"upload-item"},[a("el-upload",{ref:"upload02",staticClass:"avatar-uploader",attrs:{"http-request":t.uploadFile,action:t.base_api+"/post_style","show-file-list":!1,"auto-upload":!0,multiple:!1,"before-upload":t.beforeStyleUpload,"on-change":t.handleStyleAccept}},[t.post_style?a("img",{staticClass:"avatar",attrs:{src:t.post_style}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),a("div",{staticClass:"button"},[a("el-button",{attrs:{type:"danger"},on:{click:t.cleanAll}},[t._v("清空")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitImg}},[t._v("转换")])],1),a("div",{staticClass:"block"},[a("el-image",{attrs:{src:t.src?t.src:t.base_api+"/img_test"}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])],1)])},s=[],n=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("ba9f")),c=a("5fa3"),i={data:function(){return{base_api:"http://modderbug.cn:5004",src:"http://modderbug.cn:5004/img_test",imageUrl:"",post_style:"",post_content:"",filelist:"",formdata:"",countClick:0}},mounted:function(){this.formdata=new FormData},created:function(){},methods:{compressAccurately:n["compressAccurately"],compress:n["compress"],execFun:function(){var t=this;setInterval((function(){t.countClick+=1,console.log(t.countClick)}),1e3)},cleanAll:function(){this.$router.go(0)},initData:function(){var t=this;Object(c["a"])().then((function(e){t.src=URL.createObjectURL(e),console.log(URL.createObjectURL(e))}))},uploadFile:function(t){this.formdata.append("file",t.file)},handleContentAccept:function(t,e){this.post_content=URL.createObjectURL(t.raw)},handleStyleAccept:function(t,e){this.post_style=URL.createObjectURL(t.raw)},submitImg:function(){var t=this;this.$message.info("正在执行... 请稍后(大概需要10秒左右，服务器太垃圾了，属实抱歉)"),Object(c["d"])(this.formdata).then((function(e){t.src="data:image/jpeg;base64,"+e,t.$message.success("生成完成")})).catch((function(e){t.$message.error("服务器内存溢出了。估计你的图片太大了")}))},beforeStyleUpload:function(t){console.log(t),console.log(t.size),new Promise((function(e,a){var o=t.size/1024/1024<.2;o&&e(t);var s=t.size;Object(n["compressAccurately"])(t,100).then((function(t){console.log(s,t.size),e(t)}))}))},beforeContentUpload:function(t){console.log(t),console.log(t.size),new Promise((function(e,a){var o=t.size/1024/1024<.5;o&&e(t);var s=t.size;Object(n["compressAccurately"])(t,500).then((function(t){console.log(s,t.size),e(t)}))}))}}},l=i,r=(a("b99b"),a("2877")),u=Object(r["a"])(l,o,s,!1,null,null,null);e["default"]=u.exports},b99b:function(t,e,a){"use strict";a("3c48")}}]);